---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostsList from "../components/PostsList.astro";
import { PAGE_META } from "../lib/site";
---

<BaseLayout title={PAGE_META.posts.title} description={PAGE_META.posts.description}>
  <PostsList />
</BaseLayout>

<script is:inline>
  (() => {
    const items = document.querySelectorAll(".post-list-item");
    if (!items.length) return;

    const clearAll = () => {
      items.forEach((item) => item.classList.remove("is-touching"));
    };

    items.forEach((item) => {
      item.addEventListener(
        "pointerdown",
        (event) => {
          if (event.pointerType !== "touch") return;
          clearAll();
          item.classList.add("is-touching");
        },
        { passive: true }
      );
      item.addEventListener(
        "pointerup",
        (event) => {
          if (event.pointerType !== "touch") return;
          clearAll();
        },
        { passive: true }
      );
      item.addEventListener(
        "pointercancel",
        (event) => {
          if (event.pointerType !== "touch") return;
          clearAll();
        },
        { passive: true }
      );
    });
  })();
</script>
